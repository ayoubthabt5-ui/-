<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ÙƒÙˆÙŠØ² Ù…Ø®ØµÙ‘Øµ â€” Ù„Ø£Ù†Ùƒ Ù…Ù…ÙŠØ²Ø©</title>
<style>
  :root{
    --bg1:#fff5fb; --bg2:#f0f8ff; --accent:#ff4d94; --accent-dark:#e60073;
    --card:#ffffff; --muted:#7a7a8a;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: "Cairo", system-ui, Arial; background: linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#222; -webkit-font-smoothing:antialiased;
  }
  .container{max-width:760px;margin:28px auto;padding:18px;}
  .card{
    background:var(--card); border-radius:16px; padding:18px; box-shadow:0 8px 30px rgba(0,0,0,0.08);
  }
  header{display:flex;gap:12px;align-items:center}
  .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-dark));
         display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:22px}
  h1{margin:0;font-size:20px}
  p.lead{margin:6px 0 0;color:var(--muted)}
  /* input screen */
  .center{display:flex;flex-direction:column;align-items:center;gap:12px;padding:24px;text-align:center}
  input[type="text"]{
    width:100%;max-width:420px;padding:12px 14px;border-radius:12px;border:1px solid #eee;font-size:16px;
    box-shadow:inset 0 1px 0 rgba(0,0,0,0.03);
  }
  button.cta{
    padding:12px 18px;border-radius:12px;border:none;background:var(--accent);color:#fff;font-weight:700;
    font-size:16px;cursor:pointer;box-shadow:0 8px 18px rgba(230,0,115,0.18);transition:transform .12s;
  }
  button.cta:active{transform:translateY(2px)}
  /* quiz */
  .progress{height:8px;background:#f0f0f5;border-radius:99px;overflow:hidden;margin-bottom:12px}
  .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-dark));width:0%}
  .question{margin:8px 0 18px;font-weight:700}
  .options{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .opt{
    background:linear-gradient(180deg,#fff,#fff);padding:12px;border-radius:12px;border:1px solid #f0e8f3;cursor:pointer;
    transition:transform .12s, box-shadow .12s; display:flex;gap:10px;align-items:center;
  }
  .opt:hover{transform:translateY(-6px);box-shadow:0 10px 24px rgba(0,0,0,0.06)}
  .opt span.emoji{font-size:22px}
  .controls{display:flex;gap:8px;justify-content:space-between;margin-top:18px;align-items:center}
  .small{font-size:13px;color:var(--muted)}
  /* result */
  .result-box{display:flex;flex-direction:column;align-items:center;gap:12px;padding:10px}
  .big-heart{font-size:84px;color:var(--accent);text-shadow:0 6px 30px rgba(255,77,148,0.2);transform:scale(0);transition:transform .45s cubic-bezier(.2,.9,.3,1)}
  .big-heart.show{transform:scale(1)}
  .result-title{font-size:20px;margin:4px 0}
  .result-desc{color:var(--muted);text-align:center;padding:0 8px}
  .actions{display:flex;gap:10px}
  .btn-ghost{background:#fff;border:1px solid #eee;padding:10px 14px;border-radius:10px;cursor:pointer}
  /* confetti canvas */
  #confetti{pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999}
  /* responsive */
  @media (max-width:520px){
    .options{grid-template-columns:1fr}
    .logo{width:56px;height:56px}
    .big-heart{font-size:64px}
  }
</style>
</head>
<body>

<div class="container">
  <div class="card" id="introCard">
    <header>
      <div class="logo">â¤</div>
      <div>
        <h1>ÙƒÙˆÙŠØ² Ù…Ø®ØµÙ‘Øµ â€” ØªØ¹Ø±Ù‘ÙÙŠ Ø¹Ù„Ù‰ Ù†ÙØ³Ùƒ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø±Ø­Ø©</h1>
        <p class="lead">Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙˆØ§Ø¨Ø¯Ø£ÙŠ â€” Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø®ÙÙŠÙØ© ÙˆÙ…Ù…ØªØ¹Ø©ØŒ ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ø®ØµÙ‘ØµØ© Ù„ÙƒÙ ğŸ˜</p>
      </div>
    </header>

    <div class="center" style="margin-top:18px">
      <input id="userName" type="text" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..." />
      <div style="display:flex;gap:10px;margin-top:8px">
        <button class="cta" id="startBtn">Ø§Ø¨Ø¯Ø£ÙŠ Ø§Ù„ÙƒÙˆÙŠØ²</button>
        <button class="btn-ghost" id="randomBtn">Ø§Ø³Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠ</button>
      </div>
      <p class="small" style="margin-top:6px">Ø§Ù„ÙƒÙˆÙŠØ² Ù…Ø­Ù…ÙˆÙ„-ÙØ±ÙŠÙ†Ø¯Ù„ÙŠ ÙˆÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ</p>
    </div>
  </div>

  <div class="card" id="quizCard" style="margin-top:18px;display:none">
    <div class="progress"><i id="progressFill"></i></div>
    <div id="questionArea">
      <!-- ÙŠÙ…Ù„Ø£ Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ -->
    </div>

    <div class="controls">
      <div class="small" id="qIndex">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 6</div>
      <div>
        <button class="btn-ghost" id="prevBtn" disabled>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <button class="cta" id="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
    </div>
  </div>

  <div class="card" id="resultCard" style="margin-top:18px;display:none">
    <div class="result-box">
      <div class="big-heart" id="bigHeart">â¤</div>
      <div class="result-title" id="resultTitle"></div>
      <div class="result-desc" id="resultDesc"></div>
      <div class="actions">
        <button class="cta" id="shareBtn">Ù…Ø´Ø§Ø±ÙƒØ©</button>
        <button class="btn-ghost" id="retryBtn">Ø¥Ø¹Ø§Ø¯Ø©</button>
      </div>
    </div>
  </div>
</div>

<canvas id="confetti"></canvas>

<script>
/* ====== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø³Ù‡ÙˆÙ„Ø©) ====== */
const QUESTIONS = [
  { q: "Ù…Ø§ Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ù…ÙØ¶Ù‘Ù„ Ù„Ø¯ÙŠÙƒÙ Ù„Ù‚Ø¶Ø§Ø¡ ÙˆÙ‚Øª Ù…Ù…ØªØ¹ØŸ", opts: [
      {t:"Ù†Ø²Ù‡Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©", v:3, e:"ğŸŒ¹"}, {t:"Ø³ÙŠÙ†Ù…Ø§ ÙˆÙ…Ù‚Ø§Ø¨Ù„Ø© Ø£ØµØ¯Ù‚Ø§Ø¡", v:1, e:"ğŸ¬"},
      {t:"Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¹ Ù‚Ù‡ÙˆØ©", v:2, e:"ğŸ“š"}, {t:"Ù…ØºØ§Ù…Ø±Ø© Ø®Ø§Ø±Ø¬ÙŠØ©", v:0, e:"ğŸ•ï¸"}]},
  { q: "Ø£ÙŠÙ‘ Ø´ÙŠØ¡ ÙŠØ¬Ø°Ø¨Ùƒ Ø¨Ø³Ø±Ø¹Ø©ØŸ", opts: [
      {t:"Ø§Ù„Ù„Ø·Ø§ÙØ© ÙˆØ§Ù„Ø§Ù‡ØªÙ…Ø§Ù…", v:3, e:"ğŸ’"}, {t:"Ø§Ù„Ø°ÙƒØ§Ø¡ ÙˆØ§Ù„ÙÙƒØ§Ù‡Ø©", v:1, e:"ğŸ§ "},
      {t:"Ø§Ù„Ø·Ù…ÙˆØ­ ÙˆØ§Ù„Ø¬Ø¯Ù‘ÙŠØ©", v:2, e:"ğŸš€"}, {t:"Ø§Ù„Ø±Ø§Ø­Ø© ÙˆØ§Ù„Ø¨Ø³Ø§Ø·Ø©", v:0, e:"ğŸŒ¿"}]},
  { q: "Ù„Ùˆ ØªØ¹Ø·ÙŠ ÙŠÙˆÙ… ÙƒØ§Ù…Ù„ØŒ Ù…Ø§Ø°Ø§ ØªØ®ØªØ§Ø±ÙŠÙ†ØŸ", opts: [
      {t:"ÙŠÙˆÙ… ØªØ¯Ù„ÙŠÙ„ ÙˆÙ‡Ø¯ÙˆØ¡", v:3, e:"ğŸ›"}, {t:"ØªØ¬Ø±Ø¨Ø© Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯", v:1, e:"ğŸ½ï¸"},
      {t:"ØªØ¹Ù„Ù… Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯", v:2, e:"ğŸ“–"}, {t:"Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…Ø´Ø±ÙˆØ¹", v:0, e:"ğŸ› ï¸"}]},
  { q: "ÙƒÙŠÙ ØªÙØ¶Ù‘Ù„ÙŠÙ† Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ØŸ", opts: [
      {t:"Ø±Ø³Ø§Ù„Ø© Ù…ÙƒØªÙˆØ¨Ø© ÙˆØªØ¹Ø§Ø¨ÙŠØ±", v:3, e:"ğŸ’Œ"}, {t:"Ù‡Ø¯ÙŠØ© Ø¹Ù…Ù„ÙŠØ©", v:1, e:"ğŸ"},
      {t:"Ø´ÙŠØ¡ Ù…Ù…ÙŠØ² ÙˆØ®Ø§Ø±Ø¬ÙŠ", v:2, e:"ğŸŒŸ"}, {t:"Ù„Ø§ Ù‡Ø¯Ø§ÙŠØ§ ÙÙ‚Ø· ÙˆÙ‚Øª!", v:0, e:"â³"}]},
  { q: "Ù…Ø§ Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠ Ø§Ù„Ø£ÙØ¶Ù„ Ù„ÙƒÙØŸ", opts: [
      {t:"Ø£ØºØ§Ù†ÙŠ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©", v:3, e:"ğŸµ"}, {t:"Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…Ø±Ø­Ø©", v:1, e:"ğŸ‰"},
      {t:"Ù‡Ø¯ÙˆØ¡ ÙˆØ§Ø³ØªØ±Ø®Ø§Ø¡", v:2, e:"ğŸ§"}, {t:"Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªØ­ÙÙŠØ²ÙŠØ©", v:0, e:"ğŸ”¥"}]},
  { q: "Ø£Ù‡Ù… ØµÙØ© ÙÙŠ Ø§Ù„Ø´Ø±ÙŠÙƒ Ø­Ø³Ø¨ÙƒÙØŸ", opts: [
      {t:"Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… ÙˆØ§Ù„Ø§Ø­ØªØ±Ø§Ù…", v:3, e:"ğŸ¤"}, {t:"Ø§Ù„Ù…Ø±Ø­ ÙˆØ§Ù„Ø¬Ø±Ø£Ø©", v:1, e:"ğŸ˜„"},
      {t:"Ø§Ù„Ø·Ù…ÙˆØ­ ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù…", v:2, e:"ğŸ†"}, {t:"Ø§Ù„Ù‡Ø¯ÙˆØ¡ ÙˆØ§Ù„Ø³Ù‡ÙˆÙ„Ø©", v:0, e:"ğŸ•Šï¸"}]},
];

/* ====== Ø­Ø§Ù„Ø§Øª ========= */
let state = {
  name: null,
  index: 0,
  answers: Array(QUESTIONS.length).fill(null),
};

/* ====== Ø¹Ù†Ø§ØµØ± DOM ====== */
const introCard = document.getElementById('introCard');
const quizCard = document.getElementById('quizCard');
const resultCard = document.getElementById('resultCard');
const startBtn = document.getElementById('startBtn');
const randomBtn = document.getElementById('randomBtn');
const userName = document.getElementById('userName');
const questionArea = document.getElementById('questionArea');
const nextBtn = document.getElementById('nextBtn');
const prevBtn = document.getElementById('prevBtn');
const qIndex = document.getElementById('qIndex');
const progressFill = document.getElementById('progressFill');
const bigHeart = document.getElementById('bigHeart');
const resultTitle = document.getElementById('resultTitle');
const resultDesc = document.getElementById('resultDesc');
const shareBtn = document.getElementById('shareBtn');
const retryBtn = document.getElementById('retryBtn');
const confettiCanvas = document.getElementById('confetti');

/* ====== Ø¨Ø¯Ø¡ Ø§Ù„ÙƒÙˆÙŠØ² ====== */
startBtn.addEventListener('click', () => {
  const name = userName.value.trim();
  if(!name) return alert('Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ÙŠ Ø§Ø³Ù…Ù‹Ø§ Ù„ØªØ¨Ø¯Ø£ÙŠ ğŸ˜Š');
  state.name = name;
  introCard.style.display = 'none';
  quizCard.style.display = 'block';
  renderQuestion();
});

/* Ø§Ø³Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
randomBtn.addEventListener('click', () => {
  const samples = ["Ù„ÙŠÙ„Ù‰","Ø³Ø§Ø±Ø©","Ù†ÙˆØ±Ø§","Ù„Ù…Ù‰","Ù‡Ù†Ø¯","Ø¬Ù†Ù‰"];
  userName.value = samples[Math.floor(Math.random()*samples.length)];
});

/* ====== Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ ====== */
function renderQuestion(){
  const i = state.index;
  const item = QUESTIONS[i];
  progressFill.style.width = `${(i/QUESTIONS.length)*100}%`;
  qIndex.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${i+1} Ù…Ù† ${QUESTIONS.length}`;
  prevBtn.disabled = (i===0);
  nextBtn.textContent = (i===QUESTIONS.length-1) ? 'Ø¥Ù†Ù‡Ø§Ø¡' : 'Ø§Ù„ØªØ§Ù„ÙŠ';

  // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ø¤Ø§Ù„
  questionArea.innerHTML = `
    <div class="question">${item.q}</div>
    <div class="options" id="opts"></div>
  `;
  const opts = document.getElementById('opts');
  item.opts.forEach((o, idx) => {
    const el = document.createElement('div');
    el.className = 'opt';
    el.innerHTML = `<div style="display:flex;align-items:center;gap:12px"><span class="emoji">${o.e}</span><div><div style="font-weight:700">${o.t}</div></div></div>`;
    // ØªÙ…ÙŠÙŠØ² Ø§Ø®ØªÙŠØ§Ø± Ø³Ø§Ø¨Ù‚
    if(state.answers[i] && state.answers[i].choice === idx) el.style.boxShadow = "0 10px 30px rgba(255,77,148,0.12)";
    el.onclick = () => {
      state.answers[i] = { choice: idx, value: o.v };
      // Ø¨ØµØ±ÙŠ
      [...opts.children].forEach(c => c.style.boxShadow = 'none');
      el.style.boxShadow = "0 10px 30px rgba(255,77,148,0.12)";
    };
    opts.appendChild(el);
  });
}

/* ====== Ø§Ù„ØªÙ†Ù‚Ù„ ====== */
prevBtn.addEventListener('click', () => {
  if(state.index>0) { state.index--; renderQuestion(); }
});
nextBtn.addEventListener('click', () => {
  // ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø©
  if(!state.answers[state.index]) return alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©');
  if(state.index < QUESTIONS.length-1){
    state.index++; renderQuestion();
  } else {
    finishQuiz();
  }
});

/* ====== Ø¥Ù†Ù‡Ø§Ø¡ ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© ====== */
function finishQuiz(){
  // Ø­Ø³Ø§Ø¨ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù‚ÙŠÙ…
  const score = state.answers.reduce((s,a)=> s + (a? a.value:0), 0);
  // ØªØµÙ†ÙŠÙ Ù…Ø¨Ø³Ù‘Ø· Ø§Ù„Ù‰ 3 Ù†ØªØ§Ø¦Ø¬
  let title='', desc='';
  if(score >= (QUESTIONS.length*3) * 0.7){
    title = `Ø£Ù†ØªÙ Ù‚Ù„Ø¨ Ø±Ù‚ÙŠÙ‚ ÙˆØ±ÙˆÙ…Ø§Ù†Ø³ÙŠ ğŸŒ¸ØŒ ${state.name}`;
    desc = 'ØªÙ‚Ø¯Ù‘Ø±ÙŠÙ† Ø§Ù„Ù„Ù…Ø³Ø§Øª Ø§Ù„Ø­Ø³Ù‘Ø§Ø³Ø© ÙˆØ§Ù„Ø§Ù‡ØªÙ…Ø§Ù…ØŒ ÙˆØªØ­Ø¨ÙŠÙ† Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø¯Ø§ÙØ¦Ø© ÙˆØ§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡.';
  } else if(score >= (QUESTIONS.length*3) * 0.4){
    title = `Ù…ØªÙˆØ§Ø²Ù†Ø© ÙˆÙ…ØªÙ…ØªØ¹Ø© Ø¨Ø§Ù„Ø­ÙŠØ§Ø© âœ¨ØŒ ${state.name}`;
    desc = 'ØªØ­Ø¨ÙŠÙ† Ø§Ù„Ù…Ø±Ø­ ÙˆØ§Ù„Ø±Ø§Ø­Ø© Ù…Ø¹ Ù„Ù…Ø³Ø§Øª Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©Ø› ØªØ­Ø§ÙØ¸ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø¯ÙŠØ© ÙˆØ§Ù„Ù…Ø±Ø­.';
  } else {
    title = `Ù…ØºØ§Ù…ÙØ±Ø© ÙˆØ¹Ù…Ù„ÙŠØ© ğŸ”¥ØŒ ${state.name}`;
    desc = 'ØªØ­Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø§Øª ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŒ ÙˆØªÙ‚Ø¯Ø±ÙŠÙ† Ø§Ù„ØµØ¯Ù‚ ÙˆØ§Ù„ÙˆØ¶ÙˆØ­ ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª.';
  }

  // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
  quizCard.style.display = 'none';
  resultCard.style.display = 'block';
  resultTitle.textContent = title;
  resultDesc.textContent = desc;
  // Ù‚Ù„Ø¨ ÙŠØ¸Ù‡Ø± Ù…Ø¹ Ø§Ù†ÙŠÙ…ÙŠØ´Ù†
  setTimeout(()=> bigHeart.classList.add('show'), 80);

  // ÙƒÙˆÙ†ÙØªÙŠ
  launchConfetti();
}

/* ====== Ù…Ø´Ø§Ø±ÙƒØ©/Ø¥Ø¹Ø§Ø¯Ø© ====== */
shareBtn.addEventListener('click', async () => {
  const text = `Ù†ØªÙŠØ¬ØªÙŠ ÙÙŠ Ø§Ù„ÙƒÙˆÙŠØ²: ${resultTitle.textContent}\n${resultDesc.textContent}`;
  if(navigator.share){
    try { await navigator.share({title:'ÙƒÙˆÙŠØ² Ù…Ø®ØµÙ‘Øµ', text}); }
    catch(e){}
  } else {
    // fallback: Ù†Ø³Ø® Ù„Ù„Ø­Ø§ÙØ¸Ø©
    try {
      await navigator.clipboard.writeText(text);
      alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„ÙˆØ­Ù‡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© â€” Ø´Ø§Ø±ÙƒÙŠÙ‡Ø§ Ù…Ø¹ Ù…Ù† ØªØ­Ø¨ÙŠÙ†!');
    } catch(e){
      alert('Ø¬Ù‡Ø§Ø²Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©. ÙŠÙ…ÙƒÙ†Ùƒ Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§.');
    }
  }
});

retryBtn.addEventListener('click', () => {
  // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø©
  state.index = 0; state.answers = Array(QUESTIONS.length).fill(null);
  bigHeart.classList.remove('show');
  resultCard.style.display = 'none';
  introCard.style.display = 'block';
});

/* ====== ÙƒÙˆÙ†ÙØªÙŠ Ø¨Ø³ÙŠØ· Ø¨Ø§Ù„Ù€ canvas ====== */
function launchConfetti(){
  const canvas = confettiCanvas;
  const ctx = canvas.getContext('2d');
  const W = canvas.width = window.innerWidth;
  const H = canvas.height = window.innerHeight;
  let particles = [];
  for(let i=0;i<80;i++){
    particles.push({
      x: W/2 + (Math.random()-0.5)*200,
      y: H/3 + (Math.random()-0.5)*80,
      vx: (Math.random()-0.5)*6,
      vy: Math.random()*-6 - 2,
      size: 6+Math.random()*8,
      rot: Math.random()*360,
      color: ['#ff4d94','#ffd166','#8ecae6','#90be6d','#c77dff'][Math.floor(Math.random()*5)]
    });
  }
  let t=0;
  function loop(){
    ctx.clearRect(0,0,W,H);
    particles.forEach((p,i)=>{
      p.x += p.vx; p.y += p.vy; p.vy += 0.15; p.rot += 6;
      ctx.save();
      ctx.translate(p.x,p.y);
      ctx.rotate(p.rot*Math.PI/180);
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.7);
      ctx.restore();
      if(p.y > H+50) particles.splice(i,1);
    });
    t++;
    if(particles.length>0 && t<400) requestAnimationFrame(loop);
    else ctx.clearRect(0,0,W,H);
  }
  loop();
}

/* ====== ØªØ­Ø³ÙŠÙ†: Ø§Ø±Ø¬Ø§Ø¹ Ù„Ù„ØµÙØ­Ø© Ø¥Ø°Ø§ Ù‚Ø·Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ« ====== */
window.addEventListener('resize', () => {
  // canvas ÙŠØªØºÙŠØ± Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
});

</script>
</body>
</html>